@page "/project-notes/{id:int}"
@model ApplyToBecomeInternal.Pages.ProjectNotes.IndexModel
@{
	ViewData["Title"] = "Project Notes";
}

@section BeforeMain
{
	@* <govuk-back-link link-item="@Links.ProjectList.Index"/> *@
	<a asp-page="@Links.ProjectList.Index.Page" class="govuk-back-link">@Links.ProjectList.Index.BackText</a>
}

@if (Model.NewNote)
{
	<div class="govuk-notification-banner govuk-notification-banner--success" role="alert" aria-labelledby="govuk-notification-banner-title" data-module="govuk-notification-banner">
		<div class="govuk-notification-banner__header">
			<h2 class="govuk-notification-banner__title" id="govuk-notification-banner-title">
				Success
			</h2>
		</div>
		<div class="govuk-notification-banner__content">
			<h3 class="govuk-notification-banner__heading">
				Note added
			</h3>
		</div>
	</div>
}

<partial name="_ProjectHeader" model="Model.Project" />

<div class="govuk-grid-column-two-thirds-full">
	<h2 class="govuk-heading-l govuk-!-margin-bottom govuk-!-font-size-36">Project notes</h2>
	<a asp-page="@Links.ProjectNotes.NewNote.Page" asp-route-id="@Model.Project.Id" role="button" draggable="false" class="govuk-button govuk-button--secondary" data-module="govuk-button">Add note</a>
</div>

<div class="app-notes">
	@{ var index = 0;}
	@foreach (var note in Model.Project.ProjectNotes)
	{
		<div class="app-notes__note">
			<h2 class="govuk-heading-s govuk-!-margin-bottom-1">
				<a class="govuk-link govuk-link--no-visited-state" id="@("project-note-subject-" + index)">@note.Subject</a>
			</h2>
			<p class="govuk-!-margin-bottom-1 govuk-body-m" id="@("project-note-body-" + index)">@note.Note</p>
			<p class="govuk-body-s" id="@("project-note-date-" + index)">
				@if (!string.IsNullOrEmpty(note.Author))
				{
					@(note.Author + ", " + note.Date)
				}
				else
				{
					@note.Date
				}
			</p>
		</div>
		index++;
	}
</div>
